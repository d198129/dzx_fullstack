# 浏览器中的网络流程，页面渲染的流程，js执行的流程，web安全

- 浏览器的多进程架构

## 进程
一个进程就是一个程序的运行实例，操作系统为一个程序创建一个内存，用来存放代码、运行中的数据和一个执行任务的主线程，
这样的一个运行环境叫进程

## 进程和线程
1. 并行处理 能大大提升性能

多线程可以并行处理任务，但是线程是不能单独存在的，它是由进程来启动和管理的

线程是依附进程的

1. 进程中的任意一个线程执行出错，都会导致整个进程的奔溃
2. 线程之间是可以共享进程中的数据
3. 当一个进程关闭后，操作系统会回收进程所占用的内存
4. 进程之间的内容是相互隔离的，需要的话进程之间通信(IPC)机制

## 单进程浏览器
1. 不稳定：早起浏览器需要借助插件来实现例如web视频的功能，插件是最容易出问题的，因为插件要运行在浏览器的进程中，所以
一个插件意外奔溃会引起整个浏览器奔溃

2. 不流畅：所以页面的渲染模块，js执行环境及插件都运行在一个线程，意味着同一时刻只能由一个模块可以执行

3. 不安全：插件可以用c/c++编写，通过插件可以获取操作系统的任意资源


## 多进程浏览器
1. 解决不稳定问题： 因为进程是相互隔离的，当一个插件奔溃的时候，仅仅只是当前的页面进程受影响

2. 解决不流畅问题：js也是运行在渲染进程中的，所以即使js阻塞来渲染进程，影响到也只是当前页面

3. 解决不安全问题：把插件进程和渲染进程放在操作系统的安全沙箱运行，沙箱里的程序是不能读写硬盘数据的

## 目前的浏览器
5个进程：一个主进程，一个GPU进程，一个网络进程，多个渲染进程，多个插件进程

主进程： 负责页面显示，用户交互，子进程管理，提供存储等功能

渲染进程：把html，css和js转换成页面

GPU进程：绘制图画UI界面

网络进程：主要负责页面的网络资源加载

插件进程：负责插件的运行，会因为插件容奔溃，所以需要单独的进程来隔离


## 面向服务架构
高内聚，低耦合，易维护，易扩展